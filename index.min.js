require=function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){var r={},i=function(e,t){var n=[];n.push(t.properties),t.duration&&n.push(t.duration),t.easing&&n.push(t.easing);var i=r[e]=function(){this.params=n.slice(0)};i.prototype={start:function(e,n,r){e=$(e),t.animate?t.animate.call(this,e,n,r,this.cb):e.animate.apply(e,this.params)},complete:function(e){typeof this.params[this.params.length-1]!="function"&&(this.params.push(e),this.cb=e)},origin:function(e){e=$(e),t.origin&&typeof t.origin=="function"?t.origin.call(this,e):e.css(t.origin)}}};t.exports=function(e){if(r[e])return new r[e]},i("leftIn",{origin:{left:"-100%",top:0,position:"absolute"},properties:{left:"0"},duration:600,easing:"ease-in-out"}),i("topIn",{origin:{top:"-100%",left:0,position:"absolute"},properties:{top:"0"},duration:600,easing:"ease-in-out"}),i("rightIn",{origin:{right:"-100%",top:0,position:"absolute"},properties:{right:0},duration:600,easing:"ease-in-out"}),i("bottomIn",{origin:{top:"100%",left:0,position:"absolute"},properties:{top:0},duration:600,easing:"ease-in-out"}),i("fadeIn",{origin:{opacity:0},properties:{opacity:1},duration:1e3,easing:"ease-in"}),i("tftr",{origin:{opacity:0,right:30},properties:{opacity:1,right:-20},duration:600,easing:"ease-out"}),i("tfri",{origin:{opacity:0,right:-50},properties:{opacity:1,right:-25},duration:600,easing:"ease-out"}),i("tpop1",{origin:{opacity:0,top:30},properties:{opacity:1,top:10},duration:600,easing:"ease-out"}),i("tpop2",{origin:{opacity:0,top:50},properties:{opacity:1,top:20},duration:600,easing:"ease-out"}),i("tpop3",{origin:{opacity:0,top:60},properties:{opacity:1,top:30},duration:600,easing:"ease-out"}),i("tfd",{origin:{opacity:0,top:10},properties:{opacity:1,top:30},duration:600,easing:"ease-out"}),i("canvas-glass",{origin:function(e){if(!this.canvas){this.canvas=$('<canvas width="'+window.innerWidth+'" height="'+window.innerHeight+'"></canvas>').appendTo(e).get(0);var t=e.attr("img-src");this.img=new Image,this.img.src=t,this.preImg=$('<img src="'+t+'" width=100% height=auto style="position:absolute;left:0;top:0;z-index:100;"  />').appendTo(e)}var n=this;this.gc=n.canvas.getContext("2d"),this.preImg.show()},animate:function(){var e=this.gc,t=this;t.preImg.hide(),e.clearRect(0,0,t.canvas.width,t.canvas.height),e.drawImage(this.img,0,0,t.canvas.width,t.canvas.height),e.lineCap="round",e.lineJoin="round",e.globalCompositeOperation="destination-out",e.beginPath(),e.moveTo(window.innerWidth/2,window.innerHeight/2),e.lineWidth=50;var n=window.innerWidth,r=window.innerHeight,t=this,i=50,s=function(){if(i--){var o=n/4+n/2*Math.random(),u=r/4+r/2*Math.random();e.lineTo(o,u),e.stroke(),setTimeout(s,100)}else $(t.canvas).animate({opacity:0},800,"ease-in",function(){$(t.canvas).remove(),t.preImg.remove(),t.canvas=null})};s()}}),i("fly",{origin:{"-wetkit-transform":"rotate(0)",left:"-100%",top:"100%",position:"absolute"},animate:function(e,t,n,r){var i=20,s=i-i/(n-1)*t;e.animate({rotate:s+"deg",left:"10%",top:"10%"},300,"ease-out",r)}}),i("rollIn",{origin:{"-webkit-transform":"rotate(0) scale(0)"},properties:{rotate:"360deg",scale:"1"},duration:600}),i("scaleIn",{origin:{"-webkit-transform":"scale(2)",opacity:.3},properties:{scale:"1",opacity:1},duration:600,easing:"ease-in"}),i("scaleOut",{origin:{"-webkit-transform":"scale(0.7)",opacity:.3},properties:{scale:"1",opacity:1},duration:600,easing:"ease-in"}),i("bfi",{origin:{top:"60%",opacity:0},properties:{top:"30%",opacity:1},duration:1500,easing:"ease-out"})},{}],2:[function(e,t,n){var r=function(){this.stack=[],this.index=0};r.prototype.origin=function(){this.stack.forEach(function(e){e.animate.origin(e.actualEl())})},r.prototype.next=function(){if(!this.stack[this.index]){this.index=0;return}var e=this,t=this.stack[this.index];t.animate.complete(function(){e.index++,e.next()}),t.animate.start(t.actualEl(),this.index,this.stack.length)},r.prototype.add=function(e){this.stack.push(e)};var i=function(e,t,n){this.el=e,this.animate=t,this.type=n};i.prototype.actualEl=function(){var e=this.el.find(".so-img");return this.type=="img"&&e.size()?e:this.el},n.Chain=r,n.ChainItem=i},{}],3:[function(e,t,n){function p(e){var t={};e.each(function(e,n){n=$(n);var o=n.attr(r),a=n.attr(i),f=n.attr(s),h=n.attr(u)||"";o&&a&&f&&(t[o]||(t[o]=[]),t[o].push({index:a,item:new l.ChainItem(n,c(f),h)}))});var n=[];for(var o in t){if(!t.hasOwnProperty(o))continue;var a=new l.Chain;t[o].sort(function(e,t){return e.index-t.index}),t[o].forEach(function(e){a.add(e.item)}),n.push(a)}return n}var r="group",i="chain",s="anim",o="img-src",u="type",a="auto",f="cls",l=e("./chain"),c=e("./animation"),h=e("./page_motion");n.create=function(e){var t=$(e),n=t.find(".so-item"),r=n.filter("[type=img]"),i=n.find("video");i.size()?i=i[0]:i=null;var s=r.size(),u=p(n),l=!1,c=t.attr("init");return c&&h[c]&&h[c].init(t,r,u),{el:t,ready:!1,init:function(){},entry:function(){u.forEach(function(e){e.next()}),i&&(i.play(),window.STOP_AUDIO())},exit:function(){u.forEach(function(e){e.origin()}),i&&(i.pause(),window.PLAY_AUDIO())},prepare:function(e){if(l)return;l=!0;var t=this;if(s<=0){this.doReady(e);return}r.each(function(n,r){var i=$(r).attr(o),u=new Image;u.src=i,u.onload=u.onerror=function(){s--,s<=0&&t.doReady(e)},$(r).attr(a)!="false"&&$('<img class="so-img '+($(r).attr(f)||"")+'" src="'+i+'" />').appendTo(r)})},doReady:function(e){this.ready=!0,l=!1,this.exit(),e&&e()},scale:function(e,t){return this.el.get(0).style.webkitTransformOrigin="50% "+(t?0:"100%"),this.el.css("-webkit-transform","scale("+e+")"),this}}}},{"./animation":1,"./chain":2,"./page_motion":4}],4:[function(e,t,n){var r=e("hammerjs");t.exports={photobook:{init:function(e,t,n){var i=new r(e.get(0)),s=t.parent(),o=t.length,u=0,a=n[0],f=!1;i.on("panleft panright",function(){if(f)return;f=!0,t.eq(o-u-1).animate({opacity:0},1e3,"easing-out",function(){s.prepend(this),u=(u+1)%o,$(this).css("opacity","1");if(a){var e=a.stack.pop();a.stack.unshift(e),a.next()}f=!1})})}}}},{hammerjs:7}],5:[function(e,t,n){function u(){o.appendTo(document.body),s.remove()}function a(){o.remove(),s.appendTo(document.body)}var r=100,i=r,s=$('<div class="so-arrow"></div>'),o=$('<div class="so-page-waiting">正在加载下一页..</div>');n.create=function(){function r(n){t=n,e[n].entry(),e[n+1]?e[n+1].ready?a():(u(),e[n+1].prepare(a)):(a(),s.remove()),e[n+2]&&!e[n+2].ready&&e[n+2].prepare()}var e=[],t=0,n=0;return window.getCurrent=function(){return t},{add:function(t){e.push(t),t.el.css("z-index",i-e.length),e.length>1&&t.el.css("top",window.innerHeight)},next:function(){this.isNextReady()&&r(t+1)},prev:function(){this.isPrevReady()&&r(t-1)},hasPage:function(){return!!e.length},start:function(t){i++;if(!this.hasPage())return;e[0].prepare(function(){r(0),t&&t()})},end:function(){var r=this;i++;if(n==-1||!(n==0&&this.isNextReady()||n==1&&this.isPrevReady()))return;(n==0?e[t+1]:e[t-1]).el.animate({top:0},300,function(){r[n==0?"next":"prev"]()});var s=e[t];s.el.animate({scale:.5},300,function(){s.exit()})},up:function(r){if(this.isNextReady()){n=0;var s=e[t+1];s.el.get(0).style.webkitTransform="",s.el.css({top:window.innerHeight-r,"z-index":i}),e[t].scale(1-r/window.innerHeight/2,!0)}},down:function(r){if(this.isPrevReady()){n=1;var s=e[t-1];s.el.get(0).style.webkitTransform="",s.el.css({top:r-window.innerHeight,"z-index":i}),e[t].scale(1-r/window.innerHeight/2)}},isNextReady:function(){return t<e.length-1&&e[t+1].ready},isPrevReady:function(){return t>0&&e[t-1].ready},size:function(){return e.length},wrong:function(){n=-1}}}},{}],6:[function(e,t,n){var r={img_width:640,img_height:640,appid:"wx841a97238d9e17b2"},i=function(){return};window.WeixinJSBridge?i():document.addEventListener("WeixinJSBridgeReady",i,!1),n.config=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}},{}],7:[function(e,t,n){(function(e,n,r,i){"use strict";function c(e,t,n){return setTimeout(g(e,n),t)}function h(e,t,n){return Array.isArray(e)?(p(e,n[t],n),!0):!1}function p(e,t,n){var r;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==i){r=0;while(r<e.length)t.call(n,e[r],r,e),r++}else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function d(e,t,n){var r=Object.keys(t),s=0;while(s<r.length){if(!n||n&&e[r[s]]===i)e[r[s]]=t[r[s]];s++}return e}function v(e,t){return d(e,t,!0)}function m(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&d(i,n)}function g(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return typeof e==u?e.apply(t?t[0]||i:i,t):e}function b(e,t){return e===i?t:e}function w(e,t,n){p(T(t),function(t){e.addEventListener(t,n,!1)})}function E(e,t,n){p(T(t),function(t){e.removeEventListener(t,n,!1)})}function S(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function N(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){var r=[],i=[],s=0;while(s<e.length){var o=t?e[s][t]:e[s];N(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(t?r=r.sort(function(n,r){return n[t]>r[t]}):r=r.sort()),r}function L(e,t){var n,r,o=t[0].toUpperCase()+t.slice(1),u=0;while(u<s.length){n=s[u],r=n?n+o:t;if(r in e)return r;u++}return i}function O(){return A++}function M(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function tt(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&n.handler(t)},this.init()}function nt(e){var t,n=e.options.inputClass;return n?t=n:P?t=xt:H?t=Mt:D?t=Dt:t=yt,new t(e,rt)}function rt(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&R&&r-i===0,o=t&(z|W)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,it(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function it(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ut(t)),i>1&&!n.firstMultiple?n.firstMultiple=ut(t):i===1&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=at(r);t.timeStamp=l(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=ht(u,a),t.distance=ct(u,a),st(n,t),t.offsetDirection=lt(t.deltaX,t.deltaY),t.scale=o?dt(o.pointers,r):1,t.rotation=o?pt(o.pointers,r):0,ot(n,t);var f=e.element;S(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f}function st(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};if(t.eventType===R||s.eventType===z)i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y};t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function ot(e,t){var n=e.lastInterval||t,r=t.timeStamp-n.timeStamp,s,o,u,a;if(t.eventType!=W&&(r>q||n.velocity===i)){var l=n.deltaX-t.deltaX,c=n.deltaY-t.deltaY,h=ft(r,l,c);o=h.x,u=h.y,s=f(h.x)>f(h.y)?h.x:h.y,a=lt(l,c),e.lastInterval=t}else s=n.velocity,o=n.velocityX,u=n.velocityY,a=n.direction;t.velocity=s,t.velocityX=o,t.velocityY=u,t.direction=a}function ut(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:a(e.pointers[n].clientX),clientY:a(e.pointers[n].clientY)},n++;return{timeStamp:l(),pointers:t,center:at(t),deltaX:e.deltaX,deltaY:e.deltaY}}function at(e){var t=e.length;if(t===1)return{x:a(e[0].clientX),y:a(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:a(n/t),y:a(r/t)}}function ft(e,t,n){return{x:t/e||0,y:n/e||0}}function lt(e,t){return e===t?X:f(e)>=f(t)?e>0?V:$:t>0?J:K}function ct(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ht(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function pt(e,t){return ht(t[1],t[0],et)-ht(e[1],e[0],et)}function dt(e,t){return ct(t[0],t[1],et)/ct(e[0],e[1],et)}function yt(){this.evEl=mt,this.evWin=gt,this.allow=!0,this.pressed=!1,tt.apply(this,arguments)}function xt(){this.evEl=Et,this.evWin=St,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function kt(){this.evTarget=Nt,this.evWin=Ct,this.started=!1,tt.apply(this,arguments)}function Lt(e,t){var n=C(e.touches),r=C(e.changedTouches);return t&(z|W)&&(n=k(n.concat(r),"identifier",!0)),[n,r]}function Mt(){this.evTarget=Ot,this.targetIds={},tt.apply(this,arguments)}function _t(e,t){var n=C(e.touches),r=this.targetIds;if(t&(R|U)&&n.length===1)return r[n[0].identifier]=!0,[n,n];var i,s,o=C(e.changedTouches),u=[],a=this.target;s=n.filter(function(e){return S(e.target,a)});if(t===R){i=0;while(i<s.length)r[s[i].identifier]=!0,i++}i=0;while(i<o.length)r[o[i].identifier]&&u.push(o[i]),t&(z|W)&&delete r[o[i].identifier],i++;if(!u.length)return;return[k(s.concat(u),"identifier",!0),u]}function Dt(){tt.apply(this,arguments);var e=g(this.handler,this);this.touch=new Mt(this.manager,e),this.mouse=new yt(this.manager,e)}function Ut(e,t){this.manager=e,this.set(t)}function zt(e){if(x(e,It))return It;var t=x(e,qt),n=x(e,Rt);return t&&n?qt+" "+Rt:t||n?t?qt:Rt:x(e,Ft)?Ft:jt}function Gt(e){this.id=O(),this.manager=null,this.options=v(e||{},this.defaults),this.options.enable=b(this.options.enable,!0),this.state=Wt,this.simultaneous={},this.requireFail=[]}function Yt(e){return e&Kt?"cancel":e&$t?"end":e&Vt?"move":e&Xt?"start":""}function Zt(e){return e==K?"down":e==J?"up":e==V?"left":e==$?"right":""}function en(e,t){var n=t.manager;return n?n.get(e):e}function tn(){Gt.apply(this,arguments)}function nn(){tn.apply(this,arguments),this.pX=null,this.pY=null}function rn(){tn.apply(this,arguments)}function sn(){Gt.apply(this,arguments),this._timer=null,this._input=null}function on(){tn.apply(this,arguments)}function un(){tn.apply(this,arguments)}function an(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function fn(e,t){return t=t||{},t.recognizers=b(t.recognizers,fn.defaults.preset),new hn(e,t)}function hn(e,t){t=t||{},this.options=v(t,fn.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=nt(this),this.touchAction=new Ut(this,this.options.touchAction),pn(this,!0),p(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pn(e,t){var n=e.element;p(e.options.cssProps,function(e,r){n.style[L(n.style,r)]=t?e:""})}function dn(e,t){var r=n.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}var s=["","webkit","moz","MS","ms","o"],o=n.createElement("div"),u="function",a=Math.round,f=Math.abs,l=Date.now,A=1,_=/mobile|tablet|ip(ad|hone|od)|android/i,D="ontouchstart"in e,P=L(e,"PointerEvent")!==i,H=D&&_.test(navigator.userAgent),B="touch",j="pen",F="mouse",I="kinect",q=25,R=1,U=2,z=4,W=8,X=1,V=2,$=4,J=8,K=16,Q=V|$,G=J|K,Y=Q|G,Z=["x","y"],et=["clientX","clientY"];tt.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(M(this.element),this.evWin,this.domHandler)}};var vt={mousedown:R,mousemove:U,mouseup:z},mt="mousedown",gt="mousemove mouseup";m(yt,tt,{handler:function(t){var n=vt[t.type];n&R&&t.button===0&&(this.pressed=!0),n&U&&t.which!==1&&(n=z);if(!this.pressed||!this.allow)return;n&z&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:F,srcEvent:t})}});var bt={pointerdown:R,pointermove:U,pointerup:z,pointercancel:W,pointerout:W},wt={2:B,3:j,4:F,5:I},Et="pointerdown",St="pointermove pointerup pointercancel";e.MSPointerEvent&&(Et="MSPointerDown",St="MSPointerMove MSPointerUp MSPointerCancel"),m(xt,tt,{handler:function(t){var n=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),s=bt[i],o=wt[t.pointerType]||t.pointerType,u=o==B,a=N(n,t.pointerId,"pointerId");s&R&&(t.button===0||u)?a<0&&(n.push(t),a=n.length-1):s&(z|W)&&(r=!0);if(a<0)return;n[a]=t,this.callback(this.manager,s,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(a,1)}});var Tt={touchstart:R,touchmove:U,touchend:z,touchcancel:W},Nt="touchstart",Ct="touchstart touchmove touchend touchcancel";m(kt,tt,{handler:function(t){var n=Tt[t.type];n===R&&(this.started=!0);if(!this.started)return;var r=Lt.call(this,t,n);n&(z|W)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:B,srcEvent:t})}});var At={touchstart:R,touchmove:U,touchend:z,touchcancel:W},Ot="touchstart touchmove touchend touchcancel";m(Mt,tt,{handler:function(t){var n=At[t.type],r=_t.call(this,t,n);if(!r)return;this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:B,srcEvent:t})}}),m(Dt,tt,{handler:function(t,n,r){var i=r.pointerType==B,s=r.pointerType==F;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(z|W)&&(this.mouse.allow=!0),this.callback(t,n,r)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pt=L(o.style,"touchAction"),Ht=Pt!==i,Bt="compute",jt="auto",Ft="manipulation",It="none",qt="pan-x",Rt="pan-y";Ut.prototype={set:function(e){e==Bt&&(e=this.compute()),Ht&&(this.manager.element.style[Pt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return p(this.manager.recognizers,function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),zt(e.join(" "))},preventDefaults:function(e){if(Ht)return;var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,i=x(r,It),s=x(r,Rt),o=x(r,qt);if(i||s&&n&Q||o&&n&G)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Wt=1,Xt=2,Vt=4,$t=8,Jt=$t,Kt=16,Qt=32;Gt.prototype={defaults:{},set:function(e){return d(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(h(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=en(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return h(e,"dropRecognizeWith",this)?this:(e=en(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(h(e,"requireFailure",this))return this;var t=this.requireFail;return e=en(e,this),N(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(h(e,"dropRequireFailure",this))return this;e=en(e,this);var t=N(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function r(r){t.manager.emit(t.options.event+(r?Yt(n):""),e)}var t=this,n=this.state;n<$t&&r(!0),r(),n>=$t&&r(!0)},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Qt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(Qt|Wt)))return!1;e++}return!0},recognize:function(e){var t=d({},e);if(!y(this.options.enable,[this,t])){this.reset(),this.state=Qt;return}this.state&(Jt|Kt|Qt)&&(this.state=Wt),this.state=this.process(t),this.state&(Xt|Vt|$t|Kt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},m(tn,Gt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Xt|Vt),i=this.attrTest(e);if(r&&(n&W||!i))return t|Kt;if(r||i)return n&z?t|$t:t&Xt?t|Vt:Xt;return Qt}}),m(nn,tn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&Q&&t.push(Rt),e&G&&t.push(qt),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Q?(i=s===0?X:s<0?V:$,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=o===0?X:o<0?J:K,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return tn.prototype.attrTest.call(this,e)&&(this.state&Xt||!(this.state&Xt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Zt(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),m(rn,tn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Xt)},emit:function(e){this._super.emit.call(this,e);if(e.scale!==1){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),m(sn,Gt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[jt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(z|W)&&!i)this.reset();else if(e.eventType&R)this.reset(),this._timer=c(function(){this.state=Jt,this.tryEmit()},t.time,this);else if(e.eventType&z)return Jt;return Qt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==Jt)return;e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input))}}),m(on,tn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Xt)}}),m(un,tn,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Q|G,pointers:1},getTouchAction:function(){return nn.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(Q|G)?n=e.velocity:t&Q?n=e.velocityX:t&G&&(n=e.velocityY),this._super.attrTest.call(this,e)&&t&e.direction&&e.distance>this.options.threshold&&f(n)>this.options.velocity&&e.eventType&z},emit:function(e){var t=Zt(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),m(an,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;this.reset();if(e.eventType&R&&this.count===0)return this.failTimeout();if(r&&i&&n){if(e.eventType!=z)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||ct(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!o||!s?this.count=1:this.count+=1,this._input=e;var u=this.count%t.taps;if(u===0)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Jt,this.tryEmit()},t.interval,this),Xt):Jt}return Qt},failTimeout:function(){return this._timer=c(function(){this.state=Qt},this.options.interval,this),Qt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Jt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),fn.VERSION="2.0.4",fn.defaults={domEvents:!1,touchAction:Bt,enable:!0,inputTarget:null,inputClass:null,preset:[[on,{enable:!1}],[rn,{enable:!1},["rotate"]],[un,{direction:Q}],[nn,{direction:Q},["swipe"]],[an],[an,{event:"doubletap",taps:2},["tap"]],[sn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ln=1,cn=2;hn.prototype={set:function(e){return d(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?cn:ln},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;if(!i||i&&i.state&Jt)i=t.curRecognizer=null;var s=0;while(s<r.length)n=r[s],t.stopped!==cn&&(!i||n==i||n.canRecognizeWith(i))?n.recognize(e):n.reset(),!i&&n.state&(Xt|Vt|$t)&&(i=t.curRecognizer=n),s++},get:function(e){if(e instanceof Gt)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(h(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(h(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(N(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return p(T(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return p(T(e),function(e){t?n[e].splice(N(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&dn(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++},destroy:function(){this.element&&pn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},d(fn,{INPUT_START:R,INPUT_MOVE:U,INPUT_END:z,INPUT_CANCEL:W,STATE_POSSIBLE:Wt,STATE_BEGAN:Xt,STATE_CHANGED:Vt,STATE_ENDED:$t,STATE_RECOGNIZED:Jt,STATE_CANCELLED:Kt,STATE_FAILED:Qt,DIRECTION_NONE:X,DIRECTION_LEFT:V,DIRECTION_RIGHT:$,DIRECTION_UP:J,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:G,DIRECTION_ALL:Y,Manager:hn,Input:tt,TouchAction:Ut,TouchInput:Mt,MouseInput:yt,PointerEventInput:xt,TouchMouseInput:Dt,SingleTouchInput:kt,Recognizer:Gt,AttrRecognizer:tn,Tap:an,Pan:nn,Swipe:un,Pinch:rn,Rotate:on,Press:sn,on:w,off:E,each:p,merge:v,extend:d,inherit:m,bindFn:g,prefixed:L}),typeof define==u&&define.amd?define(function(){return fn}):typeof t!="undefined"&&t.exports?t.exports=fn:e[r]=fn})(window,document,"Hammer")},{}],app:[function(e,t,n){function f(e){a=$('<audio loop src="'+e+'"></audio>').appendTo(document.body).get(0);var t=$('<div class="so-music play"></div>').appendTo(document.body);a.play(),t.on("click",function(){a.paused?(a.play(),t.addClass("play")):(a.pause(),t.removeClass("play"))})}function c(){l=$('<div class="so-load-c full"><div class="so-page-loading"></div></div>').appendTo(document.body)}function h(){l.remove()}var r=e("hammerjs"),i=e("./page"),s=e("./pagem").create(),o=".so-page",u=e("./share"),a;t.exports=function(e,t){var n=$($(e).text());n.appendTo(document.body).height(window.innerHeight),n.find(o).each(function(e,t){s.add(i.create(t))}),c(),t.audio&&f(t.audio);if(!s.hasPage())return;$(document.body).on("touchstart touchmove touchend",function(e){e.preventDefault()}),t.share&&u.config(t.share),s.start(function(){h();var e=new r(n.get(0));e.on("pandown",function(e){s.down(e.distance)}),e.on("panup",function(e){s.up(e.distance)}),e.on("panleft panright",function(){s.wrong()}),e.on("panend",function(){s.end()})})},window.STOP_AUDIO=function(){a&&a.pause()},window.PLAY_AUDIO=function(){a&&a.play()};var l},{"./page":3,"./pagem":5,"./share":6,hammerjs:7}]},{},[]);